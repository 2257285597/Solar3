# 吞噬范围配置指南

## ?? 控制位置

吞噬范围现在可以在 Unity Inspector 中直接调整！

### 在 Player 预制体或任意天体组件中：

```
┌─────────────────────────────────────┐
│ Celestial Body (Script)             │
├─────────────────────────────────────┤
│  吞噬规则                          │
│   Devour Threshold: ????  0.8   │
│   (滑块范围 0.1 - 1.0)              │
└─────────────────────────────────────┘
```

---

## ?? 参数说明

### `Devour Threshold`（吞噬阈值）

**公式：**
```
可吞噬条件：对方质量 < 自己质量 × Devour Threshold
```

**范围：** 0.1 - 1.0

**默认值：** 0.8（80%）

---

## ?? 不同阈值效果对比

### 示例：玩家质量为 10

| Threshold | 可吞噬范围 | 安全区 | 会被吞噬 | 难度 |
|-----------|------------|--------|----------|------|
| **0.5** | < 5.0 | 5.0 - 20.0 | > 20.0 | ?? 极难 |
| **0.7** | < 7.0 | 7.0 - 14.3 | > 14.3 | ?? 困难 |
| **0.8** | < 8.0 | 8.0 - 12.5 | > 12.5 | ?? 平衡（默认）|
| **0.9** | < 9.0 | 9.0 - 11.1 | > 11.1 | ?? 简单 |
| **1.0** | < 10.0 | 10.0 - 10.0 | > 10.0 | ?? 街机（Solar 2 原版）|

---

## ?? 推荐配置

### 配置 A：街机模式（轻松爽快）
```
Devour Threshold: 1.0
```
- ? 任何比自己小的都能吃
- ? 快速成长
- ? 适合休闲玩家
- ?? 缺少策略性

---

### 配置 B：平衡模式（默认）
```
Devour Threshold: 0.8
```
- ? 需要明显优势才能吞噬
- ? 有策略空间
- ? 适合大多数玩家
- ? 质量接近时会弹开

---

### 配置 C：硬核模式（高难度）
```
Devour Threshold: 0.5
```
- ? 必须是对方 2 倍质量才能吞噬
- ? 极具挑战性
- ? 每次吞噬都有成就感
- ?? 成长缓慢

---

### 配置 D：动态难度
```
陨石阶段：Devour Threshold = 0.9（容易成长）
行星阶段：Devour Threshold = 0.8（正常）
恒星阶段：Devour Threshold = 0.7（后期增加挑战）
```

如果想实现这个，需要在代码中添加：
```csharp
protected override void TriggerEvolution()
{
    base.TriggerEvolution();
    
    // 根据阶段调整吞噬难度
    switch (currentStage)
    {
        case EvolutionStage.Planet:
            devourThreshold = 0.8f;
            break;
        case EvolutionStage.Star:
            devourThreshold = 0.7f;
            break;
    }
}
```

---

## ?? 计算公式详解

### 吞噬条件：
```
other.mass < self.mass × devourThreshold
```

### 安全区域（互不吞噬）：
```
self.mass × devourThreshold ≤ other.mass ≤ self.mass / devourThreshold
```

### 会被吞噬：
```
other.mass > self.mass / devourThreshold
```

---

## ?? 实际测试示例

### 测试 1：Threshold = 0.8（默认）
```
玩家质量：10
小行星 A 质量：5   → ? 可吞噬（5 < 10×0.8=8）
小行星 B 质量：7   → ? 可吞噬（7 < 8）
小行星 C 质量：8   → ? 弹开（8 = 8）
小行星 D 质量：9   → ? 弹开（9 > 8）
小行星 E 质量：13  → ?? 会被吞噬（10 < 13×0.8=10.4）
```

### 测试 2：Threshold = 1.0（街机）
```
玩家质量：10
小行星 A 质量：5   → ? 可吞噬
小行星 B 质量：9   → ? 可吞噬
小行星 C 质量：10  → ? 弹开（相等）
小行星 D 质量：11  → ?? 会被吞噬
```

### 测试 3：Threshold = 0.5（硬核）
```
玩家质量：10
小行星 A 质量：3   → ? 可吞噬（3 < 10×0.5=5）
小行星 B 质量：5   → ? 弹开（5 = 5）
小行星 C 质量：7   → ? 弹开（在安全区）
小行星 D 质量：20  → ? 弹开（在安全区）
小行星 E 质量：21  → ?? 会被吞噬（10 < 21×0.5=10.5）
```

---

## ?? 调整步骤

### 方法 1：在预制体中设置（推荐）

1. **Project 窗口** → 选中 `Player` 预制体
2. **Inspector** → `Player Controller` 组件
3. 找到 ** 吞噬规则** 部分
4. 拖动 **Devour Threshold** 滑块
   - 向左（0.1）→ 更难吞噬
   - 向右（1.0）→ 更容易吞噬
5. **Ctrl+S** 保存预制体

### 方法 2：在游戏运行时调整（测试用）

1. 运行游戏
2. **Hierarchy** → 选中场景中的 Player
3. **Inspector** → 调整 `Devour Threshold`
4. 实时观察效果
5. **注意**：游戏结束后会丢失修改

---

## ?? 设计建议

### 平衡考量：

**Threshold 太高（> 0.9）：**
- ? 玩家成长快
- ? 缺少挑战
- ? 容易"无脑吃"

**Threshold 太低（< 0.6）：**
- ? 高挑战性
- ? 成长太慢
- ? 可能感觉挫败

**推荐范围：0.7 - 0.85**
- 保持策略性
- 不会太挫败
- 有明确的吞噬/逃跑判断

---

### 游戏阶段建议：

```
早期测试：1.0（快速体验所有内容）
α 测试：0.8（收集反馈）
β 测试：0.75（精调难度）
正式版：0.8（大众化）
困难模式：0.6（给高手玩家）
```

---

## ?? 玩家体验优化

### 配合其他系统：

**1. 视觉反馈：**
```csharp
// 在 OnGUI 中显示是否可吞噬
if (other.mass < mass * devourThreshold)
    DrawIcon("? 可吞噬", Color.green);
else if (other.mass > mass / devourThreshold)
    DrawIcon("?? 危险", Color.red);
else
    DrawIcon("≈ 弹开", Color.yellow);
```

**2. 颜色提示：**
- 可吞噬的天体：绿色边框
- 危险的天体：红色边框
- 安全区：黄色边框

**3. UI 提示：**
显示"当前可吞噬质量范围：< X"

---

## ?? 数据对比表

### 质量 10 时不同阈值的吞噬范围：

| Threshold | 可吞噬 | 安全区宽度 | 描述 |
|-----------|--------|------------|------|
| 0.5 | < 5 | 5 - 20 (15单位) | 超窄吞噬区，超宽安全区 |
| 0.6 | < 6 | 6 - 16.7 (10.7单位) | 较窄吞噬区 |
| 0.7 | < 7 | 7 - 14.3 (7.3单位) | 窄吞噬区 |
| 0.8 | < 8 | 8 - 12.5 (4.5单位) | 平衡 ? |
| 0.9 | < 9 | 9 - 11.1 (2.1单位) | 宽吞噬区 |
| 1.0 | < 10 | 10 - 10 (0单位) | 无安全区 |

**观察**：Threshold 越小，安全区越宽，游戏越"稳"但也越慢。

---

## ?? 高级应用

### 不同天体类型不同规则：

```csharp
// 在 CelestialBody.cs 的 Awake 中
protected virtual void Awake()
{
    // ... 其他代码
    
    // 根据天体类型设置不同的吞噬规则
    if (gameObject.name.Contains("Boss"))
        devourThreshold = 0.5f;  // Boss 难吃
    else if (gameObject.name.Contains("Food"))
        devourThreshold = 1.0f;  // "食物"天体容易吃
}
```

### 玩家技能影响吞噬范围：

```csharp
// "贪婪"技能：提升吞噬范围
public void ActivateGreedSkill()
{
    devourThreshold = Mathf.Min(devourThreshold + 0.1f, 1.0f);
}
```

---

## ? 检查清单

调整吞噬范围后测试：

- [ ] 陨石阶段吞噬正常
- [ ] 质量接近时会弹开（不互吃）
- [ ] 大天体能吞噬小天体
- [ ] 小天体会被大天体吞噬
- [ ] 游戏难度符合预期
- [ ] 不会太简单或太难
- [ ] Console 没有异常日志

---

现在你可以在 Unity Inspector 中直接调整 **Devour Threshold** 滑块来改变吞噬难度了！??

推荐先设为 **1.0** 快速测试，然后调回 **0.8** 作为平衡值。
